<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TodoApp</title>
    <!-- 引入jq -->
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="assets/minireset.css">
    <link rel="stylesheet" href="assets/style.css">
</head>
<body>
    <header>
        <form>
            <input type="text" placeholder="Enter an activity.." name="item" id="item">
            <button type="submit" id="add">
                <svg t="1616330011387" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2432" width="18" height="18"><path d="M846.6875 455.92578125H568.51367188V177.6640625c0-30.9375-25.3125-56.16210938-56.16210938-56.16210938-30.9375 0-56.16210938 25.3125-56.16210938 56.16210938v278.26171875H177.83984375c-30.9375 0-56.16210938 25.3125-56.16210938 56.16210938 0 30.9375 25.3125 56.16210938 56.16210938 56.16210937h278.26171875v278.26171875c0 30.9375 25.3125 56.16210938 56.16210938 56.16210938 30.9375 0 56.16210938-25.3125 56.16210937-56.16210938V568.25h278.26171875c30.9375 0 56.16210938-25.3125 56.16210938-56.16210938 0.08789063-30.84960938-25.22460938-56.16210938-56.16210938-56.16210937z" fill="#25b99a" p-id="2433"></path></svg>
            </button>
        </form>
    </header>
    <div class="container">
        <!-- 未完成的列表 -->
        <ul class="todo" id="todo">
            <!-- 动态添加数据 -->
            <% todos.forEach(function(todo){%>
                <li>
                    <%= todo.item %>
                    <div class="buttons">
                        <button class="remove"><svg t="1616335467761" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2237" width="22" height="22"><path d="M905.095 208.272c-0.723-13.831-8.416-22.5-21.935-24.964-9.591-1.748-19.427-2.978-29.157-3.003-86.191-0.226-172.383-0.131-258.575-0.132-33.351 0-33.746-0.003-33.526-32.945 0.107-16.082-2.276-30.68-17.72-38.771-18.485-9.684-38.335-9.957-56.659-0.784-17.966 8.993-20.791 26.286-18.357 44.809 0.489 3.722-0.236 7.611 0.315 11.317 1.911 12.864-3.273 16.675-16.211 16.658-65.739-0.088-131.48 0.861-197.221 1.272-33.198 0.208-66.403-0.284-99.596 0.188-17.428 0.248-31.405 5.801-32.05 26.883-0.632 20.665 11.01 30.367 29.789 32.983 8.168 1.138 16.754 1.418 24.885 0.245 18.279-2.637 24.062 3.035 23.817 22.671-1.187 95.25-0.536 190.522-0.536 285.787 0 94.508-0.052 189.017 0.02 283.525 0.042 54.383 27.569 82.889 81.862 83.012 154.237 0.351 308.475 0.311 462.712 0.022 54.345-0.102 81.543-28.003 81.768-82.957 0.262-64.265 0.061-128.531 0.061-192.797 0-125.507 0.497-251.018-0.52-376.517-0.158-19.465 5.267-25.341 23.708-22.741 12.025 1.695 24.391 0.459 35.599-4.637 12.134-5.515 18.229-15.704 17.527-29.124zM703.894 852.013c-127.824 0.459-255.648 1.108-383.472 1.53-42.18 0.139-55.197-13.105-55.226-55.644-0.06-88.514-0.018-177.028-0.018-265.542 0-90.027 0.354-180.056-0.345-270.078-0.118-15.18 2.786-20.515 19.406-20.441 154.329 0.685 308.663 0.647 462.992 0.03 15.437-0.062 18.313 4.852 18.296 19.052-0.212 176.262 0.311 352.525 0.354 528.787 0.012 48.329-14.318 62.135-61.987 62.306z" p-id="2238" fill="#c0cecb"></path><path d="M457.826 551.954c-0.005 62.494 0.248 124.989-0.122 187.48-0.16 27.053-21.176 42.105-41.952 30.851-13.621-7.378-15.183-20.088-15.14-33.959 0.217-70.131 0.1-140.263 0.099-210.395 0-52.078-0.013-104.156 0.005-156.234 0.01-28.205 9.473-41.657 29.029-41.383 19.282 0.27 28.061 13.458 28.076 42.408 0.031 60.412 0.009 120.822 0.005 181.232zM640.505 548.427c0 67.266 0.079 134.531-0.04 201.797-0.046 25.885-12.42 41.664-31.659 41.105-18.649-0.542-30.391-15.588-30.412-40.16-0.114-135.287-0.119-270.574 0.002-405.861 0.023-25.653 10.741-38.957 30.533-39.21 20.326-0.26 31.51 13.901 31.546 40.533 0.091 67.264 0.03 134.53 0.03 201.796z" p-id="2239" fill="#c0cecb"></path></svg></button>
                        <button class="complete">
                            <svg t="1616335516532" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2646" width="22" height="22"><path d="M435.776 646.08l320-326.08L800 364.928 435.84 736 256 553.024l44.16-44.96z" p-id="2647" fill="#25b99a"></path></svg>
                        </button>
                    </div>
                </li>
            <%})%>
            
        </ul>
        <!-- 已完成的列表 -->
        <ul class="todo" id="completed">
            <!-- 动态获取数据 -->
            <li>
                完成毕业设计与论文
                <div class="buttons">
                    <button class="remove">
                        <svg t="1616335467761" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2237" width="22" height="22"><path d="M905.095 208.272c-0.723-13.831-8.416-22.5-21.935-24.964-9.591-1.748-19.427-2.978-29.157-3.003-86.191-0.226-172.383-0.131-258.575-0.132-33.351 0-33.746-0.003-33.526-32.945 0.107-16.082-2.276-30.68-17.72-38.771-18.485-9.684-38.335-9.957-56.659-0.784-17.966 8.993-20.791 26.286-18.357 44.809 0.489 3.722-0.236 7.611 0.315 11.317 1.911 12.864-3.273 16.675-16.211 16.658-65.739-0.088-131.48 0.861-197.221 1.272-33.198 0.208-66.403-0.284-99.596 0.188-17.428 0.248-31.405 5.801-32.05 26.883-0.632 20.665 11.01 30.367 29.789 32.983 8.168 1.138 16.754 1.418 24.885 0.245 18.279-2.637 24.062 3.035 23.817 22.671-1.187 95.25-0.536 190.522-0.536 285.787 0 94.508-0.052 189.017 0.02 283.525 0.042 54.383 27.569 82.889 81.862 83.012 154.237 0.351 308.475 0.311 462.712 0.022 54.345-0.102 81.543-28.003 81.768-82.957 0.262-64.265 0.061-128.531 0.061-192.797 0-125.507 0.497-251.018-0.52-376.517-0.158-19.465 5.267-25.341 23.708-22.741 12.025 1.695 24.391 0.459 35.599-4.637 12.134-5.515 18.229-15.704 17.527-29.124zM703.894 852.013c-127.824 0.459-255.648 1.108-383.472 1.53-42.18 0.139-55.197-13.105-55.226-55.644-0.06-88.514-0.018-177.028-0.018-265.542 0-90.027 0.354-180.056-0.345-270.078-0.118-15.18 2.786-20.515 19.406-20.441 154.329 0.685 308.663 0.647 462.992 0.03 15.437-0.062 18.313 4.852 18.296 19.052-0.212 176.262 0.311 352.525 0.354 528.787 0.012 48.329-14.318 62.135-61.987 62.306z" p-id="2238" fill="#c0cecb"></path><path d="M457.826 551.954c-0.005 62.494 0.248 124.989-0.122 187.48-0.16 27.053-21.176 42.105-41.952 30.851-13.621-7.378-15.183-20.088-15.14-33.959 0.217-70.131 0.1-140.263 0.099-210.395 0-52.078-0.013-104.156 0.005-156.234 0.01-28.205 9.473-41.657 29.029-41.383 19.282 0.27 28.061 13.458 28.076 42.408 0.031 60.412 0.009 120.822 0.005 181.232zM640.505 548.427c0 67.266 0.079 134.531-0.04 201.797-0.046 25.885-12.42 41.664-31.659 41.105-18.649-0.542-30.391-15.588-30.412-40.16-0.114-135.287-0.119-270.574 0.002-405.861 0.023-25.653 10.741-38.957 30.533-39.21 20.326-0.26 31.51 13.901 31.546 40.533 0.091 67.264 0.03 134.53 0.03 201.796z" p-id="2239" fill="#c0cecb"></path></svg>
                    </button>
                    <button class="complete">
                        <svg t="1616335516532" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2646" width="22" height="22"><path d="M435.776 646.08l320-326.08L800 364.928 435.84 736 256 553.024l44.16-44.96z" p-id="2647" fill="#fff"></path></svg>
                    </button>
                </div>
            </li>
        </ul>
    </div>
</body>
<script>
    $(document).ready(function(){
        $('header').on('submit',function(){
            //获取input的值
            var item=$('form input');
            var todo={item:item.val()};
            //判断内容是否为空
            if(todo.item==""){
                alert('内容不能为空');
                return;
            }

            //发送数据请求
            $.ajax({
                type:'POST',
                url:'/todo',
                data:todo,

            });
        })
        //删除数据
        $('.remove').on('click',function(){
            var item=$.trim($(this).parent().parent().text());
            $.ajax({
                type:"DELETE",
                url:'/todo/'+item,
                success:function(data){
                    location.reload();
                }
            })
        })
    })
</script>
</html>